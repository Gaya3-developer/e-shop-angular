<div class="breadcrumb-main">
  <div class="container">
    <div class="row">
      <div class="col">
        <div class="breadcrumb-contain">
          <div>
            <h2>product</h2>
            <ul>
              <li><a routerLink="/">home</a></li>
              <li>
                <fa-icon
                  [icon]="faAngleDoubleRight"
                  class="angle-right-icon"
                ></fa-icon>
              </li>
              <li><a routerLink="/products">product</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<section class="section-big-py-space b-g-light" *ngIf="!isSubmitted">
  <div class="custom-container">
    <div class="checkout-page contact-page">
      <div class="checkout-form">
        <form #checkoutForm="ngForm" (ngSubmit)="addOrder(checkoutForm)">
          <div class="row">
            <div class="col-lg-6 col-sm-12 col-xs-12">
              <div class="checkout-title">
                <h3>Billing Details</h3>
              </div>
              <div class="theme-form">
                <div class="row check-out">
                  <div class="form-group col-md-6 col-sm-6 col-xs-12">
                    <label>Name</label>
                    <input
                      type="text"
                      name="name"
                      #name="ngModel"
                      [ngModel]="userName"
                      placeholder=""
                      [ngClass]="{
                        'is-invalid':
                          (checkoutForm.submitted && name.errors) ||
                          (name.invalid && (name.dirty || name.touched))
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        (checkoutForm.submitted && name.errors) ||
                        (name.invalid && (name.dirty || name.touched))
                      "
                      class="invalid-feedback"
                    >
                      <div *ngIf="name.errors['required']">
                        Name is required
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6 col-sm-6 col-xs-12">
                    <label class="field-label">Email Address</label>
                    <input
                      type="email"
                      name="email"
                      #email="ngModel"
                      [ngModel]="emailId"
                      value=""
                      placeholder=""
                      [ngClass]="{
                        'is-invalid':
                          (checkoutForm.submitted && email.errors) ||
                          (email.invalid && (email.dirty || email.touched))
                      }"
                      required
                      email
                    />
                    <div
                      *ngIf="
                        (checkoutForm.submitted && email.errors) ||
                        (email.invalid && (email.dirty || email.touched))
                      "
                      class="invalid-feedback"
                    >
                      <div *ngIf="email.errors['required']">
                        Email is required
                      </div>
                      <div *ngIf="email.errors['email']">
                        Email must be a valid email address
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6 col-sm-6 col-xs-12">
                    <label class="field-label">Phone</label>
                    <input
                      type="text"
                      [pattern]="phoneNumberPattern"
                      name="phone"
                      value=""
                      placeholder=""
                      ngModel
                      #phone="ngModel"
                      [ngClass]="{
                        'is-invalid':
                          (checkoutForm.submitted && phone.errors) ||
                          (phone.invalid && (phone.dirty || phone.touched))
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        (checkoutForm.submitted && phone.errors) ||
                        (phone.invalid && (phone.dirty || phone.touched))
                      "
                      class="invalid-feedback"
                    >
                      <div *ngIf="phone.errors['required']">
                        Phone number is required
                      </div>
                      <div *ngIf="phone.errors['pattern']">
                        Phone number not valid.
                      </div>
                    </div>
                  </div>
                  <div class="form-group col-md-6 col-sm-6 col-xs-12">
                    <label class="field-label">Town/City</label>
                    <input
                      type="text"
                      name="city"
                      value=""
                      placeholder=""
                      ngModel
                      #city="ngModel"
                      [ngClass]="{
                        'is-invalid':
                          (checkoutForm.submitted && city.errors) ||
                          (city.invalid && (city.dirty || city.touched))
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        (checkoutForm.submitted && city.errors) ||
                        (city.invalid && (city.dirty || city.touched))
                      "
                      class="invalid-feedback"
                    >
                      <div *ngIf="city.errors['required']">
                        city is required
                      </div>
                    </div>
                  </div>

                  <div class="form-group col-md-12 col-sm-12 col-xs-12">
                    <label class="field-label">Address</label>
                    <input
                      type="text"
                      name="address"
                      value=""
                      placeholder="Street address"
                      ngModel
                      #address="ngModel"
                      [ngClass]="{
                        'is-invalid':
                          (checkoutForm.submitted && address.errors) ||
                          (address.invalid &&
                            (address.dirty || address.touched))
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        (checkoutForm.submitted && address.errors) ||
                        (address.invalid && (address.dirty || address.touched))
                      "
                      class="invalid-feedback"
                    >
                      <div *ngIf="address.errors['required']">
                        address is required
                      </div>
                    </div>
                  </div>

                  <div class="form-group col-md-12 col-sm-6 col-xs-12">
                    <label class="field-label">State</label>
                    <input
                      type="text"
                      name="state"
                      value=""
                      placeholder=""
                      ngModel
                      #state="ngModel"
                      [ngClass]="{
                        'is-invalid':
                          (checkoutForm.submitted && state.errors) ||
                          (state.invalid && (state.dirty || state.touched))
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        (checkoutForm.submitted && state.errors) ||
                        (state.invalid && (state.dirty || state.touched))
                      "
                      class="invalid-feedback"
                    >
                      <div *ngIf="state.errors['required']">
                        State is required
                      </div>
                    </div>
                  </div>

                  <div class="form-group col-md-12 col-sm-12 col-xs-12">
                    <label class="field-label">Country</label>
                    <select
                    name="country" 
                    [(ngModel)]="country"
                    (change)="onChangeCountry($event)"
                    >
                      <option value="" disabled>Choose your country</option>
                      <option
                        *ngFor="let country of countries"
                        [ngValue]="country.id"
                      >
                        {{ country.name }}
                      </option>
                    </select>
                  
                  </div>
                  <div class="form-group col-md-12 col-sm-6 col-xs-12">
                    <label class="field-label">Postal Code</label>
                    <input
                      type="text"
                      name="postCode"
                      value=""
                      placeholder=""
                      ngModel
                      #postCode="ngModel"
                      [ngClass]="{
                        'is-invalid':
                          (checkoutForm.submitted && postCode.errors) ||
                          (postCode.invalid &&
                            (postCode.dirty || postCode.touched))
                      }"
                      required
                    />
                    <div
                      *ngIf="
                        (checkoutForm.submitted && postCode.errors) ||
                        (postCode.invalid &&
                          (postCode.dirty || postCode.touched))
                      "
                      class="invalid-feedback"
                    >
                      <div *ngIf="postCode.errors['required']">
                        Postal code is required
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-sm-12 col-xs-12">
              <div class="checkout-details theme-form section-big-mt-space">
                <div class="order-box">
                  <div class="title-box">
                    <div>Product <span>Total</span></div>
                  </div>
                  <ul class="qty">
                    <li  *ngFor="let item of cartData.products">
                        {{ item.title }} X {{ item.quantity }}<span>
                            {{ item.quantity * item.price | currency: "USD" }}
                        </span></li>
                  </ul>
                  <ul class="sub-total">
                    <li>Total <span class="count">{{ cartData.total | currency: "USD" }}</span></li>
                
                  </ul>
             
                </div>
                <div class="payment-box">
                  <div class="upper-box">
                    <div class="payment-options">
                      <ul>
                        <li>
                          <div class="radio-option">
                            <input
                              type="radio"
                              name="paymentMethod"
                              id="payment-1"
                              checked="checked"
                              value="card"
                              [(ngModel)] = "payment"
                            />
                            <label for="payment-1"
                              >Card</label
                            >
                          </div>
                        </li>
                        <li>
                          <div class="radio-option">
                            <input
                              type="radio"
                              name="paymentMethod"
                              id="payment-2"
                              value="cod"
                              [(ngModel)] = "payment"
                            />
                            <label for="payment-2"
                              >Cash On Delivery</label
                            >
                          </div>
                        </li>
                        <li>
                          <div class="radio-option paypal">
                            <input
                              type="radio"
                              name="paymentMethod"
                              id="payment-3"
                              value="paypal"
                              [(ngModel)] = "payment"
                            />
                            <label for="payment-3">PayPal</label>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="text-right" >
                    <button type="submit" class="btn-normal btn"
                    [disabled]="checkoutForm.invalid"
                      >Place Order</button
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>




<section class="section-big-py-space light-layout" *ngIf="isSubmitted">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="success-text">   <fa-icon
                    [icon]="faCheckCircle"
                    class="check-circle-icon"
                  ></fa-icon>
                    <h2>thank you</h2>
                    <p>Payment is successfully processsed and your order is on the way</p>
                    <p>Transaction ID:{{orderId}}</p>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="section-big-py-space mt--5 b-g-light"*ngIf="isSubmitted" >
    <div class="custom-container">
        <div class="row">
            <div class="col-lg-6">
                <div class="product-order">
                    <h3>your order details</h3>
                    <div class="row product-order-detail"  *ngFor="let item of products">
                        <div class="col-3"><img src="{{item.image}}" alt="" class="img-fluid "></div>
                        <div class="col-3 order_detail">
                            <div>
                                <h4>product name</h4>
                                <h5>{{item.title}}</h5></div>
                        </div>
                        <div class="col-3 order_detail">
                            <div>
                                <h4>quantity</h4>
                                <h5>{{item.quantity}}</h5></div>
                        </div>
                        <div class="col-3 order_detail">
                            <div>
                                <h4>price</h4>
                                <h5>{{item.price | currency:"INR"}}</h5></div>
                        </div>
                    </div>
                  
                  
                    <div class="final-total">
                        <h3>total <span>{{total | currency : "INR"}}</span></h3></div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="row order-success-sec">
                    <div class="col-sm-6">
                        <h4>summery</h4>
                        <ul class="order-detail">
                            <li>order ID: {{orderId}}</li>
                            <li>Order Date: {{orderDate | date}}</li>
                            <li>Order Total: {{total | currency : "INR"}}</li>
                        </ul>
                    </div>
                    <div class="col-sm-6">
                        <h4>shipping address</h4>
                         <ul class="order-detail">
                            <li>{{userName}}</li>
                            <li>{{orderData.city}}, {{orderData.state}}</li>
                            <li>{{countryName}}, {{orderData.postCode}}</li>
                            <li>Contact No. {{orderData.phone}}</li>
                        </ul>
                    </div>
                    <div class="col-sm-12 payment-mode">
                        <h4>payment method</h4>
                        <p *ngIf="orderData.paymentMethod === 'cod'">cash on delivery
                        </p>
                        <p *ngIf="orderData.paymentMethod === 'card'">card payment
                        </p>
                        <p *ngIf="orderData.paymentMethod === 'paypal'">Paypal method
                        </p>
                    </div>
                    <div class="col-md-12">
                        <div class="delivery-sec">
                            <h3>expected date of delivery</h3>
                            <h2>{{delivaryExpectedDate | date}}</h2></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
